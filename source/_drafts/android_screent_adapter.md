### px

真实像素单位，由于不同的手机之间分辨率是不同，在分辨率越来越高的手机上同尺寸的控件看起来越来越小。 

![](..\images\android\screent_adapter_px.jpg)

### dp

设备独立像素，以dp为尺寸单位的控件，在不同分辨率和尺寸的手机上代表了不同的真实像素（在不同的手机中能表现出差不多的大小）。
![](..\images\android\screent_adapter_dp.jpg)

### dpi
像素密度，指系统软件上指定的单位尺寸的像素数量（往往是写在系统出厂配置文件的一个固定值）

> 计算公式：
> px = density * dp
> density = dpi /160
> px = dp * (dpi/160)


##Android目前主流的适配方案

###dp直接适配
###宽高限定符适配
###UI适配框架
###smallestWidth适配

也叫sw限定符适配，指的是Android会识别**屏幕可用高度和宽度的最小尺寸**的dp值（其实是手机的宽度值），然后根据识别到的结果去资源文件中寻找对应限定符的文件夹下的资源文件。 

```java

Configuration config = getResources().getConfiguration();
int smallestScreenWidth = config.smallestScreenWidthDp;
LogUtils.d("smallest width : " + smallestScreenWidth);
```






#解决方案
- 问题：如何进行屏幕密度匹配？
- 答：
![屏幕密度匹配解决方案.png](http://upload-images.jianshu.io/upload_images/944365-04e4124d0daf0a69.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

###“布局控件”匹配
**本质：使得布局组件在不同屏幕密度上显示相同的像素效果**
- 做法1：使用密度无关像素
由于各种屏幕的像素密度都有所不同，因此相同数量的像素在不同设备上的实际大小也有所差异，这样使用像素（px）定义布局尺寸就会产生问题。
因此，请务必使用**密度无关像素 dp** 或**独立比例像素 sp **单位指定尺寸。
- 相关概念介绍
**密度无关像素**
- 含义：density-independent pixel，叫dp或dip，与终端上的实际物理像素点无关。
- 单位：dp，可以保证在不同屏幕像素密度的设备上显示相同的效果
>1. Android开发时用dp而不是px单位设置图片大小，是Android特有的单位
>2. 场景：假如同样都是画一条长度是屏幕一半的线，如果使用px作为计量单位，那么在480x800分辨率手机上设置应为240px；在320x480的手机上应设置为160px，二者设置就不同了；如果使用dp为单位，在这两种分辨率下，160dp都显示为屏幕一半的长度。

- dp与px的转换
因为ui给你的设计图是以px为单位的，Android开发则是使用dp作为单位的，那么该如何转换呢？

|  密度类型  |  代表的分辨率（px） | 屏幕密度（dpi）|换算（px/dp） |比例|
| ------------- |:-------------:| -------------:| -------------:|
| 低密度（ldpi）    | 240x320   | 120 |1dp=0.75px|3|
| 中密度（mdpi）    | 320x480  | 160 |1dp=1px|4|
| 高密度（hdpi）    | 480x800  | 240|1dp=1.5px|6|
| 超高密度（xhdpi）    | 720x1280  | 320|1dp=2px|8|
| 超超高密度（xxhdpi）    | 1080x1920  | 480 |1dp=3px|12|

在Android中，规定以160dpi（即屏幕分辨率为320x480）为基准：1dp=1px



**独立比例像素**
- 含义：scale-independent pixel，叫sp或sip
- 单位：sp
>1. Android开发时用此单位设置文字大小，可根据用户的偏好文字大小/字体大小首选项进行缩放
>2. 推荐使用12sp、14sp、18sp、22sp作为字体设置的大小，不推荐使用奇数和小数，容易造成精度的丢失问题；小于12sp的字体会太小导致用户看不清

所以，为了能够进行不同屏幕像素密度的匹配，我们推荐：
- 使用dp来代替px作为控件长度的统一度量单位
- 使用sp作为文字的统一度量单位

可是，请看以下一种场景：
>Nexus5的总宽度为360dp，我们现在在水平方向上放置两个按钮，一个是150dp左对齐，另外一个是200dp右对齐，那么中间留有10dp间隔；但假如同样地设置在Nexus S（屏幕宽度是320dp），会发现，两个按钮会重叠，因为320dp<200+150dp

从上面可以看出，由于Android屏幕设备的多样性，如果使用dp来作为度量单位，并不是所有的屏幕的宽度都具备相同的dp长度
>再次明确，**屏幕宽度和像素密度没有任何关联关系**

所以说，dp解决了同一数值在不同分辨率中展示相同尺寸大小的问题（即屏幕像素密度匹配问题），但却没有解决设备尺寸大小匹配的问题。（即屏幕尺寸匹配问题）

>当然，我们一开始讨论的就是屏幕尺寸匹配问题，使用match_parent、wrap_content和weight，尽可能少用dp来指定控件的具体长宽，大部分的情况我们都是可以做到适配的。

#那么该如何解决控件的屏幕尺寸和屏幕密度的适配问题呢？
从上面可以看出：
- 因为屏幕密度（分辨率）不一样，所以不能用固定的px
- 因为屏幕宽度不一样，所以要小心的用dp

因为本质上是希望使得布局组件在不同屏幕密度上显示相同的像素效果，那么，之前是绕了个弯使用dp解决这个问题，那么到底能不能直接用px解决呢？
>即根据不同屏幕密度，控件选择对应的像素值大小

接下来介绍一种方法：**百分比适配方法**，步骤如下：
1. 以某一分辨率为基准，生成所有分辨率对应像素数列表
2. 将生成像素数列表存放在res目录下对应的values文件下
3. 根据UI设计师给出设计图上的尺寸，找到对应像素数的单位，然后设置给控件即可


#步骤1：以某一分辨率为基准，生成所有分辨率对应像素数列表

现在我们以320x480的分辨率为基准：
- 将屏幕的宽度分为320份，取值为x1~x320
- 将屏幕的高度分为480份，取值为y1~y480

然后生成该分辨率对应像素数的列表，如下图：
- lay_x.xml（宽）

  

因为对于没有生成对应分辨率文件的手机，会使用默认values文件夹，如果默认values文件夹没有（即没有对应的分辨率、没有对应dimen）就会报错，从而无法进行屏幕适配。
  （**注意对应单位改为dp，而不同于上面的px。**因为不知道机型的分辨率，所以默认分辨率文件只好默认为x1=1dp以保证尽量兼容（又回到dp老方法了），**这也是这个解决方案的一个弊端**）
